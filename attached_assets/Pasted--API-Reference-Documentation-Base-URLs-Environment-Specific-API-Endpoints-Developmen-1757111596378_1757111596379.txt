# API Reference Documentation

## 🌐 Base URLs

### Environment-Specific API Endpoints

**Development Environment:**

- Base URL: `http://localhost:5000/api`
- WebSocket: `ws://localhost:5000`
- Health Check: `http://localhost:5000/health`
WEB / BACKEND / DB - https://6aaaa561-0065-42b7-9a43-fa52389738ae-00-123k4q64cdvhw.spock.replit.dev/

**Production Environment:**

- Base URL: `https://ascended.social/api`
- WebSocket: `wss://ascended.social`
- Health Check: `https://ascended.social/health`

---

## 🔐 Authentication Endpoints

### Get Current User 🔒

Retrieve the currently authenticated user's information.

```
GET /api/auth/user
```

**Response:**

```json
{
  "id": "user-uuid",
  "username": "spiritual_seeker",
  "email": "seeker@example.com",
  "aura": 15,
  "energy": 85,
  "profileImage": "◇○◇\n△☆△\n◇○◇",
  "createdAt": "2024-01-15T10:30:00Z"
}
```

### Logout User 🔒

End the current user session.

```
POST /api/auth/logout
```

---

## 📝 Posts & Community Endpoints

### List Posts

Retrieve community posts with spiritual content.

```
GET /api/posts?limit=20&offset=0&chakra=all&sortBy=recent
```

**Query Parameters:**

- `limit` (optional): Number of posts to return (default: 20, max: 100)
- `offset` (optional): Number of posts to skip (default: 0)
- `chakra` (optional): Filter by chakra type (`root`, `sacral`, `solar`, `heart`, `throat`, `third_eye`, `crown`, `all`)
- `sortBy` (optional): Sort order (`recent`, `popular`, `spiritual_frequency`)

**Response:**

```json
[
  {
    "id": "post-uuid",
    "content": "Today I experienced a profound moment of inner peace...",
    "chakra": "crown",
    "spiritualFrequency": 0.85,
    "author": {
      "id": "user-id",
      "username": "mystic_soul",
      "profileImage": "sigil-data"
    },
    "engagements": {
      "likes": 12,
      "upvotes": 8,
      "downvotes": 1,
      "energy": 45,
      "spiritualMarks": 6
    },
    "createdAt": "2024-01-15T14:20:00Z"
  }
]
```

### Create Post 🔒

Share new spiritual content with the community.

```
POST /api/posts
Content-Type: application/json
```

**Request Body:**

```json
{
  "content": "Sharing today's spiritual insight about inner harmony...",
  "mediaUrls": ["https://storage.googleapis.com/spiritual-image.jpg"],
  "isPublic": true,
  "chakraHint": "heart"
}
```

**Response:**

```json
{
  "id": "new-post-uuid",
  "content": "Sharing today's spiritual insight...",
  "chakra": "heart",
  "spiritualFrequency": 0.78,
  "author": {
    "id": "user-id",
    "username": "spiritual_seeker"
  },
  "createdAt": "2024-01-15T16:45:00Z"
}
```

### Engage with Post 🔒

Like, upvote, or share energy with spiritual content.

```
POST /api/posts/:postId/engage
Content-Type: application/json
```

**Request Body:**

```json
{
  "type": "energy",
  "amount": 25
}
```

**Engagement Types:**

- `like`: Free engagement (0 energy cost)
- `upvote`: Free positive vote
- `downvote`: Free negative vote
- `energy`: Share energy points (costs energy)
- `spiritual_mark`: Mark as spiritually meaningful

---

## 👤 User & Profile Endpoints

### Get User Profile

Retrieve public profile information for any user.

```
GET /api/users/:userId
```

**Response:**

```json
{
  "id": "user-uuid",
  "username": "enlightened_being",
  "aura": 25,
  "profileImage": "evolved-sigil-data",
  "joinedAt": "2024-01-01T00:00:00Z",
  "stats": {
    "postsCount": 47,
    "totalEngagements": 234,
    "energyShared": 1250,
    "spiritualLevel": 12
  }
}
```

### Update User Profile 🔒

Modify the current user's profile information.

```
PUT /api/users/profile
Content-Type: application/json
```

**Request Body:**

```json
{
  "bio": "Walking the path of spiritual awakening...",
  "location": "Sacred Valley",
  "website": "https://mystic-journey.com"
}
```

---

## 🌟 Spirit Guide Endpoints

### Get User's Spirit Guide 🔒

Retrieve the AI-generated spirit guide for the current user.

```
GET /api/spirit
```

**Response:**

```json
{
  "id": "spirit-uuid",
  "name": "Luna Dreamweaver",
  "element": "water",
  "level": 7,
  "experience": 350,
  "description": "A flowing, intuitive presence that navigates emotions and dreams.",
  "imageUrl": "https://storage.googleapis.com/spirit-avatar.png",
  "evolution": {
    "stage": "awakened",
    "nextEvolution": 500,
    "abilities": ["dream_interpretation", "emotional_healing"]
  }
}
```

### Update Spirit Experience 🔒

Add experience points to the user's spirit guide.

```
PUT /api/spirit/experience
Content-Type: application/json
```

**Request Body:**

```json
{
  "experienceGain": 15,
  "source": "energy_sharing"
}
```

---

## 🔮 Oracle & Readings Endpoints

### Get Daily Oracle Reading 🔒

Receive a personalized daily spiritual reading.

```
GET /api/readings/daily
```

**Response:**

```json
{
  "id": "reading-uuid",
  "title": "Embracing Your Inner Light",
  "message": "The universe calls you to recognize the divine spark within...",
  "chakraFocus": "heart",
  "practicalAdvice": "Practice loving-kindness meditation for 10 minutes today",
  "meditation": "Focus on the green light in your heart center...",
  "affirmation": "I am love, I am light, I am connected to all beings",
  "date": "2024-01-15",
  "personalizedFor": "user-id"
}
```

### Generate Tarot Reading 🔒 Premium

Create a personalized tarot card reading.

```
POST /api/readings/tarot
Content-Type: application/json
```

**Request Body:**

```json
{
  "question": "What guidance do I need for my spiritual growth?",
  "spread": "three_card"
}
```

**Response:**

```json
{
  "id": "tarot-reading-uuid",
  "question": "What guidance do I need for my spiritual growth?",
  "cards": [
    {
      "position": "past",
      "card": "The Hermit",
      "meaning": "Soul searching and inner wisdom"
    },
    {
      "position": "present", 
      "card": "The Star",
      "meaning": "Hope, healing, and spiritual guidance"
    },
    {
      "position": "future",
      "card": "The Sun",
      "meaning": "Joy, success, and enlightenment"
    }
  ],
  "interpretation": "Your journey shows a progression from introspection to hope to full illumination...",
  "createdAt": "2024-01-15T18:30:00Z"
}
```

---

## 🌟 Visions Endpoints

### List Visions 🔒

Retrieve dreams, goals, and spiritual aspirations from the community.

```
GET /api/visions?limit=20&offset=0&manifestStatus=all
```

**Query Parameters:**

- `limit` (optional): Number of visions to return (default: 20, max: 100)
- `offset` (optional): Number of visions to skip (default: 0)
- `manifestStatus` (optional): Filter by manifestation status (`pending`, `manifested`, `all`)

**Response:**

```json
[
  {
    "id": "vision-uuid",
    "title": "Manifesting Inner Peace",
    "description": "My journey toward lasting spiritual tranquility...",
    "manifestationDate": "2024-06-01",
    "isManifested": false,
    "mediaUrl": "https://storage.googleapis.com/vision-image.jpg",
    "author": {
      "id": "user-id",
      "username": "dream_weaver",
      "profileImage": "sigil-data"
    },
    "engagements": {
      "likes": 12,
      "energy": 45
    },
    "createdAt": "2024-01-15T16:30:00Z"
  }
]
```

### Create Vision 🔒

Share a new spiritual vision or manifestation goal.

```
POST /api/visions
Content-Type: application/json
```

**Request Body:**

```json
{
  "title": "Manifesting Abundance",
  "description": "Visualizing prosperity in all areas of life",
  "manifestationDate": "2024-12-31",
  "mediaUrls": ["https://storage.googleapis.com/vision1.jpg"]
}
```

---

## 🏘️ Communities Endpoints

### List Communities

Browse spiritual communities and groups.

```
GET /api/communities?limit=20&offset=0&category=all
```

**Query Parameters:**

- `limit` (optional): Number of communities to return (default: 20)
- `offset` (optional): Number of communities to skip (default: 0)
- `category` (optional): Filter by community category

**Response:**

```json
[
  {
    "id": "community-uuid",
    "name": "Meditation Masters",
    "description": "A community for advanced meditation practitioners",
    "memberCount": 247,
    "category": "meditation",
    "isPublic": true,
    "creator": {
      "id": "user-id",
      "username": "zen_master"
    },
    "createdAt": "2024-01-01T00:00:00Z"
  }
]
```

### Join/Leave Community 🔒

Join or leave a spiritual community.

```
POST /api/communities/:communityId/join
```

**Request Body:**

```json
{
  "action": "join"
}
```

---

## 💳 Subscription Endpoints

### Get or Create Subscription 🔒

Manage Stripe subscription for Premium features.

```
POST /api/get-or-create-subscription
```

**Response:**

```json
{
  "subscriptionId": "sub_stripe_id",
  "clientSecret": "pi_client_secret_for_frontend"
}
```

---

## 🏥 Health Check Endpoints

### Basic Health Check

Check if the API is responsive.

```
GET /health
```

**Response:**

```json
{
  "status": "healthy",
  "timestamp": "2024-01-15T21:00:00Z"
}
```

### API Health Check

Check API and database connectivity.

```
GET /api/health
```

**Response:**

```json
{
  "status": "healthy",
  "database": "connected",
  "ai": "operational",
  "timestamp": "2024-01-15T21:00:00Z"
}
```

---

## 🚨 Error Codes

### Authentication Errors

- `AUTH_001`: Invalid session token
- `AUTH_002`: Session expired
- `AUTH_003`: User not found

### Validation Errors

- `VAL_001`: Missing required fields
- `VAL_002`: Invalid data format
- `VAL_003`: Content too long/short

### Business Logic Errors

- `BIZ_001`: Insufficient energy
- `BIZ_002`: Premium feature required
- `BIZ_003`: Rate limit exceeded

### System Errors

- `SYS_001`: Database connection failed
- `SYS_002`: AI service unavailable
- `SYS_003`: External service error

---

*May your API integrations be blessed with perfect status codes and seamless spiritual connections!* ✨